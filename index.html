---
layout: default
title: Home
---

<div class="poems-list">
  <h2>Poems</h2>

  {% assign ordered_poems = site.data.poem_order.poems %}
  
  {% if ordered_poems.size > 0 %}
    <h3>Featured Poems</h3>
    <ul class="poem-entries">
      {% for poem_entry in ordered_poems %}
        {% assign entry_filename = poem_entry.filename | split: "." | first %}
        {% assign found_poem = false %}
        
        {% for site_poem in site.poems %}
          {% assign site_poem_name = site_poem.name | split: "." | first %}
          {% if site_poem_name contains entry_filename or entry_filename contains site_poem_name %}
            <li>
              <a href="{{ site_poem.url | relative_url }}">
                {% if poem_entry.title %}
                  {{ poem_entry.title }}
                {% else %}
                  {{ site_poem.title }}
                {% endif %}
              </a>
            </li>
            {% assign found_poem = true %}
            {% break %}
          {% endif %}
        {% endfor %}
        
        {% unless found_poem %}
          <li class="not-found">{{ poem_entry.title }} (not found)</li>
        {% endunless %}
      {% endfor %}
    </ul>
  {% endif %}
  
  <h3>All Poems</h3>
  
  {% assign all_poems = site.poems | sort: "folder" %}
  {% assign folders = all_poems | map: "folder" | uniq %}
  
  {% for folder in folders %}
    {% if folder %}
      <div class="folder-section">
        <h4>{{ folder | capitalize }}</h4>
        <ul class="poem-entries">
          {% assign folder_poems = all_poems | where: "folder", folder %}
          {% for poem in folder_poems %}
            <li>
              <a href="{{ poem.url | relative_url }}">{{ poem.title }}</a>
              {% if poem.original_filename %}
                <span class="original-filename">({{ poem.original_filename }})</span>
              {% endif %}
            </li>
          {% endfor %}
        </ul>
      </div>
    {% else %}
      <div class="folder-section">
        <h4>Uncategorized</h4>
        <ul class="poem-entries">
          {% assign uncategorized_poems = all_poems | where_exp: "item", "item.folder == nil or item.folder == ''" %}
          {% for poem in uncategorized_poems %}
            <li>
              <a href="{{ poem.url | relative_url }}">{{ poem.title }}</a>
              {% if poem.original_filename %}
                <span class="original-filename">({{ poem.original_filename }})</span>
              {% endif %}
            </li>
          {% endfor %}
        </ul>
      </div>
    {% endif %}
  {% endfor %}
</div> 